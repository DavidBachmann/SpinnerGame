var Game={name:"Spinner Game",States:{},Prefabs:{}};Game.States.Boot=function(a){},Game.States.Boot.prototype={create:function(){this.game.state.start("Preloader")}},Game.States.Preloader=function(a){this.asset=null,this.ready=!1},Game.States.Preloader.prototype={preload:function(){this.game.time.advancedTiming=!0,this.load.onLoadComplete.addOnce(this.onLoadComplete,this),this.load.atlas("hero","assets/hero.png","assets/hero.json"),this.load.image("background","assets/WOF-background.png"),this.load.image("sky","assets/WOF-sky.png"),this.load.image("clouds","assets/WOF-clouds.png"),this.load.image("piano","assets/WOF-piano.png"),this.load.image("pianoShadow","assets/pianoShadow.png"),this.load.image("wheelCenter","assets/WOF-center.png"),this.load.image("wheelColors","assets/WOF-colors_w-pictures.png"),this.load.image("wheelFrame","assets/WOF-frame.png"),this.load.image("wheelStand","assets/WOF-stand.png"),this.load.image("wheelNeedle","assets/WOF-needle.png"),this.load.image("wheelTop","assets/WOF-top.png"),this.load.image("leverBase","assets/WOF-lever-base.png"),this.load.image("leverHandle","assets/WOF-lever-handle.png"),this.load.atlas("spinButton","assets/spinButton.png","assets/spinButton.json"),this.load.image("youWin","assets/you-win-text.png"),this.load.image("youLose","assets/you-lost-text.png")},create:function(){},update:function(){this.ready&&this.game.state.start("Play")},onLoadComplete:function(){this.ready=!0}},Game.States.Play=function(a){this.canClickWheel=!0,this.howLongDoesTheWheelWait=1e4},Game.States.Play.prototype={create:function(){this.game.world.setBounds(0,0,1613,625),this.cursors=this.game.input.keyboard.createCursorKeys(),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.sky=this.game.add.sprite(0,0,"sky"),this.sky.fixedToCamera=!0,this.clouds=this.game.add.tileSprite(0,0,2564,296,"clouds"),this.clouds.autoScroll(-10,0),this.background=this.game.add.sprite(0,0,"background"),this.piano=this.game.add.sprite(660,-500,"piano"),this.piano.scale.setTo(.8),this.wheelGroup=this.game.add.group(),this.wheelGroup.position.setTo(740,90),this.wheelGroup.scale.setTo(.65),this.wheelStand=this.wheelGroup.create(650,300,"wheelStand"),this.wheelStand.anchor.setTo(.5,0),this.wheelColors=this.wheelGroup.create(650,300,"wheelColors"),this.wheelColors.anchor.setTo(.5,.5),this.game.physics.enable(this.wheelColors,Phaser.Physics.ARCADE),this.wheelFrame=this.wheelGroup.create(650,300,"wheelFrame"),this.wheelFrame.anchor.setTo(.5,.5),this.game.physics.enable(this.wheelFrame,Phaser.Physics.ARCADE),this.wheelCenter=this.wheelGroup.create(650,300,"wheelCenter"),this.wheelCenter.anchor.setTo(.5,.5),this.game.physics.enable(this.wheelCenter,Phaser.Physics.ARCADE),this.wheelFrame.inputEnabled=!0,this.wheelFrame.events.onInputDown.add(this.wheelHandler,this),this.wheelCenter.inputEnabled=!0,this.wheelCenter.events.onInputDown.add(this.wheelHandler,this),this.wheelFrame.body.maxAngular=500,this.wheelCenter.body.maxAngular=250,this.wheelColors.body.maxAngular=300,this.wheelFrame.body.angularDrag=100,this.wheelCenter.body.angularDrag=100,this.wheelColors.body.angularDrag=200,this.hero=new Game.Prefabs.Hero(this.game,770,260),this.game.add.existing(this.hero),this.backToMenu=this.game.add.sprite(0,0),this.backToMenu.texture.baseTexture.skipRender=!1,this.backToMenu.height=this.game.height,this.backToMenu.width=650,this.backToMenu.inputEnabled=!0,this.backToMenu.events.onInputDown.add(this.toggleMenu,this),this.camera.x=528,this.canClickWheel=!0},update:function(){this.canClickWheel?this.wheelFrame.tint=16777215:this.wheelFrame.tint=16753920,this.cursors.left.isDown?this.game.camera.x-=8:this.cursors.right.isDown&&(this.game.camera.x+=8)},toggleMenu:function(){var a=this.game.add.tween(this.game.camera);46===this.game.camera.x?a.to({x:520},650,"Back.easeOut"):a.to({x:46},650,"Back.easeOut"),a.start()},render:function(){this.game.debug.cameraInfo(this.game.camera,32,32)},wheelHandler:function(){this.wheelCenter.body.angularAcceleration>0&&this.canClickWheel?this.stopWheel():0===this.wheelCenter.body.angularAcceleration&&this.canClickWheel&&(this.spinWheel(),this.hero.animations.play("hero-smiling-thumbsup"))},spinWheel:function(){this.wheelFrame.body.angularAcceleration=-100,this.wheelCenter.body.angularAcceleration=100,this.wheelColors.body.angularAcceleration=-15,this.canClickWheel=!1,this.game.time.events.add(3e3,this.makeWheelClickable,this)},stopWheel:function(){this.wheelFrame.body.angularAcceleration=0,this.wheelCenter.body.angularAcceleration=0,this.wheelColors.body.angularAcceleration=0,this.canClickWheel=!1,this.hero.animations.play("hero-surprised-pointing"),this.game.time.events.add(6e3,this.checkIfWon,this)},makeWheelClickable:function(){this.canClickWheel=!0,this.hero.animations.play("hero-smiling-pointing")},checkIfWon:function(){this.chance=Phaser.Utils.chanceRoll(),this.chance?(this.hero.animations.play("hero-frowning-shrugging"),this.game.time.events.add(1e3,this.deathAnimation,this)):(this.hero.animations.play("hero-frowning-shrugging"),this.game.time.events.add(1e3,this.deathAnimation,this))},deathAnimation:function(){this.triggerPiano=this.game.add.tween(this.piano.position).to({y:220},200,"Linear",!0),this.game.time.events.add(200,function(){this.hero.animations.play("heroDeath").onComplete.add(function(){this.hero.kill(),this.game.time.events.add(500,function(){this.game.add.tween(this.piano).to({alpha:0},200,"Linear",!0),this.game.time.events.add(500,this.reset,this)},this)},this)},this)},reset:function(){this.game.state.start("Play")}},Game.Prefabs.Hero=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"hero",11);var d=["hero-angry-pointing","hero-angry-waving","hero-frowning-shrugging","hero-laughing-pointing","hero-laughing-thumbsup","hero-laughing-waving","hero-lost-hit-one","hero-lost-hit-three","hero-lost-hit-two","hero-lost","hero-notimpressed-shrugging","hero-smiling-pointing","hero-smiling-shrugging","hero-smiling-thumbsup","hero-smiling-waving","hero-surprised-pointing","hero-surprised-shrugging"];this.scale.setTo(.8);for(var e=0;e<d.length;e++)this.animations.add(d[e],[e]);this.animations.add("heroDeath",[6,8,7])},Game.Prefabs.Hero.prototype=Object.create(Phaser.Sprite.prototype),Game.Prefabs.Hero.prototype.update=function(){},Game.Prefabs.Hero.prototype.render=function(){},Game.Prefabs.Wheel=function(a,b,c){return Phaser.Sprite.call(this,a,b,c),this.wheelGroup=this.game.add.group(),this.wheelGroup.position.setTo(400,65),this.wheelGroup.scale.setTo(.65),this.wheelStand=this.wheelGroup.create(650,300,"wheelStand"),this.wheelStand.anchor.setTo(.5,0),this.wheelColors=this.wheelGroup.create(650,300,"wheelColors"),this.wheelColors.anchor.setTo(.5,.5),this.game.physics.enable(this.wheelColors,Phaser.Physics.ARCADE),this.wheelFrame=this.wheelGroup.create(650,300,"wheelFrame"),this.wheelFrame.anchor.setTo(.5,.5),this.game.physics.enable(this.wheelFrame,Phaser.Physics.ARCADE),this.wheelCenter=this.wheelGroup.create(650,300,"wheelCenter"),this.wheelCenter.anchor.setTo(.5,.428),this.game.physics.enable(this.wheelCenter,Phaser.Physics.ARCADE),this.wheelFrame.inputEnabled=!0,this.wheelCenter.inputEnabled=!0,this.wheelFrame.body.maxAngular=250,this.wheelCenter.body.maxAngular=500,this.wheelFrame.body.angularDrag=100,this.wheelCenter.body.angularDrag=100,this.wheelColors.body.angularDrag=200,this.wheelGroup},Game.Prefabs.Wheel.prototype=Object.create(Phaser.Sprite.prototype),Game.Prefabs.Wheel.prototype.update=function(){this.canClickWheel?this.wheelFrame.tint=16777215:this.wheelFrame.tint=16753920},window.onload=function(){var a=new Phaser.Game(960,580,Phaser.AUTO,"game");a.state.add("Boot",Game.States.Boot),a.state.add("Preloader",Game.States.Preloader),a.state.add("Play",Game.States.Play),a.state.start("Boot")};